.\" Automatically generated by Pod::Man version 1.02
.\" Thu Aug  2 14:21:17 2001
.\"
.\" Standard preamble:
.\" ======================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R

.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used
.\" to do unbreakable dashes and therefore won't be available.  \*(C` and
.\" \*(C' expand to `' in nroff, nothing in troff, for use with C<>
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` `
.    ds C' '
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr
.\" for titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and
.\" index entries marked with X<> in POD.  Of course, you'll have to process
.\" the output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
.    .
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it
.\" makes way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.bd B 3
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ======================================================================
.\"
.IX Title "BUNDLEDOC 1"
.TH BUNDLEDOC 1 " " "2001-08-02" "User Commands"
.UC
.SH "NAME"
bundledoc \- bundle all the files needed by a LaTeX document
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
bundledoc
[\fB--version\fR]
[\fB--help\fR]
[\fB--\fR[\fBno\fR]\fBverbose\fR]
[\fB--texfile\fR=\fIfile\fR]
[\fB--directory\fR=\fIdirectory\fR]
[\fB--manifest\fR=\fIfile\fR]
[\fB--\fR[\fBno\fR]\fBkeepdirs\fR]
[\fB--config\fR=\fIfile\fR]
\&\fI.dep file\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBbundledoc\fR is a post-processor for the \fBsnapshot\fR package that
bundles together all the classes, packages, and files needed to build
a given LaTeX document.	 It reads the \fI.dep\fR file that \fBsnapshot\fR
produces, finds each of the files mentioned therein, and packages them
into a single archive file (e.g., a \fI.tar.gz\fR file), suitable for
moving across systems, transmitting to a colleague, etc.
.PP
As the simplest example possible, consider a LaTeX file called, say,
\&\fIhello.tex\fR:
.PP
.Vb 2
\&    \eRequirePackage{snapshot}       % Needed by bundledoc
\&    \edocumentclass[11pt]{article}
.Ve
.Vb 3
\&    \ebegin{document}
\&    Hello, world!
\&    \eend{document}
.Ve
The \f(CW\*(C`\eRequirePackage{snapshot}\*(C'\fR causes a \fIhello.dep\fR file to be produced.
When \fBbundledoc\fR is then given \f(CW\*(C`hello.dep\*(C'\fR as an argument, it locates the
dependent files \*(-- \fIsnapshot.sty\fR, \fIarticle.cls\fR, and \fIsize11.clo\fR \-\-
and bundles them into a single archive file, along with \fIhello.tex\fR and a
\&\fI\s-1MANIFEST\s0\fR file (described in the section on "OPTIONS", below).
.SH "OPTIONS"
.IX Header "OPTIONS"
In the following descriptions, \fIsomefile\fR refers to the name of your
main LaTeX document (no extension).
.PP
\&\fBbundledoc\fR requires the name of the dependency file produced by
\&\fBsnapshot\fR (normally \fIsomefile\fR\fI.dep\fR).  The following options may
also be given:
.Ip "\fB--version\fR" 4
.IX Item "version"
Output the \fBbundledoc\fR script's version number.  This overrides all the
remaining options.
.Ip "\fB--help\fR" 4
.IX Item "help"
Give a brief usage message.  This overrides all of the remaining options.
.Ip "\fB--\fR[\fBno\fR]\fBverbose\fR			(default: \f(CW\*(C`noverbose\*(C'\fR)" 4
.IX Item "--[no]verbose			(default: noverbose)"
\&\fBbundledoc\fR normally does not output anything except error messages.
With \f(CW\*(C`\-\-verbose\*(C'\fR, it outputs copious status messages.
.Ip "\fB--texfile\fR=\fImain .tex file\fR		(default: \fIsomefile\fR\fI.tex\fR)" 4
.IX Item "texfile=main .tex file		(default: somefile.tex)"
\&\fBsnapshot\fR's dependency file does not list the main LaTeX file (the one
that gets passed to \fBlatex\fR).	In order for \fBbundledoc\fR to find and
bundle that file, \fBbundledoc\fR assumes it has the same name as the
\&\fBsnapshot\fR dependency file but with a \fI.tex\fR extension.  If this is
not the case, then use \f(CW\*(C`\-\-texfile\*(C'\fR to specify the correct filename.
.Ip "\fB--directory\fR=\fIdirectory within the tar file\fR (default: \fIsomefile\fR)" 4
.IX Item "directory=directory within the tar file (default: somefile)"
When \fBbundledoc\fR creates an archive (e.g., a \fI.tar\fR or \fI.zip\fR file)
containing the document's files, it puts all of them in a directory, to
avoid cluttering the current directory with files.  If the given
dependency file is called \fIsomefile\fR\fI.dep\fR, then the resulting archive
will, by default, store all the dependent files in a \fIsomefile\fR
directory.  To change the directory name, use the \f(CW\*(C`\-\-directory\*(C'\fR option.
.Ip "\fB--manifest\fR=\fImanifest file\fR		(default: \fI\s-1MANIFEST\s0\fR)" 4
.IX Item "manifest=manifest file		(default: MANIFEST)"
In addition to the dependent files, \fBbundledoc\fR includes in the tar
file one extra file called, by default, ``\fI\s-1MANIFEST\s0\fR''.  \fI\s-1MANIFEST\s0\fR is
a text file that lists the keepdirs filenames of all the dependencies.
To change the filename from ``\fI\s-1MANIFEST\s0\fR'' to something else, use the
\&\f(CW\*(C`\-\-manifest\*(C'\fR option.  As a special case, \f(CW\*(C`\-\-manifest=""\*(C'\fR tells
\&\fBbundledoc\fR not to include a manifest file at all.
.Ip "\fB--\fR[\fBno\fR]\fBkeepdirs\fR			(default: \f(CW\*(C`nokeepdirs\*(C'\fR)" 4
.IX Item "--[no]keepdirs			(default: nokeepdirs)"
Normally, the tar file \fBbundledoc\fR produces contains a single
directory, in which all the dependent files lie.  If \f(CW\*(C`\-\-keepdirs\*(C'\fR is
specified, all the dependent files are stored with their keepdirs
pathnames.  For example, if the \fIsomefile\fR document depends on
\&\fIsomefile\fR\fI.tex\fR, \fIarticle.cls\fR, and \fIsnapshot.sty\fR,
\&\fIsomefile\fR\fI.tar.gz\fR will normally contain the following files:
.RS 4
.Ip "\(bu" 4
\&\fIsomefile\fR\fI/\fR\fIsomefile\fR\fI.tex\fR
.Ip "\(bu" 4
\&\fIsomefile\fR\fI/article.cls\fR
.Ip "\(bu" 4
\&\fIsomefile\fR\fI/snapshot.sty\fR
.Ip "\(bu" 4
\&\fIsomefile\fR\fI/MANIFEST\fR
.RE
.RS 4
.Sp
However, \f(CW\*(C`\-\-keepdirs\*(C'\fR will cause \fIsomefile\fR\fI.tar.gz\fR to contain the
following sorts of filenames instead:
.RS 4
.RE
.Ip "\(bu" 4
\&\fIhome/me/mydocs/\fR\fIsomefile\fR\fI.tex\fR
.Ip "\(bu" 4
\&\fIusr/share/localtexmf/tex/latex/base/article.cls\fR
.Ip "\(bu" 4
\&\fIusr/share/localtexmf/tex/latex/snapshot/snapshot.sty\fR
.RE
.RS 4
.Sp
\&\f(CW\*(C`\-\-directory\*(C'\fR is not used when \f(CW\*(C`\-\-keepdirs\*(C'\fR is in effect.  In
addition, no manifest file is written to the tar file, as it contains
redundant information.
.RE
.Ip "\fB--config\fR=\fIconfiguration file\fR		(default: <none>)" 4
.IX Item "config=configuration file		(default: <none>)"
The \f(CW\*(C`\-\-config\*(C'\fR option is used to point \fBbundledoc\fR to the appropriate
configuration (\fI.cfg\fR) file for your TeX distribution and operating
system.	 \fBbundledoc\fR comes with a few configuration files, and it's
easy to write more.  See the section on "CONFIGURATION FILES" (below) for a
description of the configuration file format.
.SH "CONFIGURATION FILES"
.IX Header "CONFIGURATION FILES"
.Sh "Format"
.IX Subsection "Format"
Configuration files follow a fairly simple format.  Lines beginning with
\&\f(CW\*(C`#\*(C'\fR are comments.  Blank lines are ignored.  All other lines are of the
form:
.PP
.Vb 1
\&    variable: value
.Ve
The current version of \fBbundledoc\fR recognizes the following variables:
.Ip "\fBbundle\fR" 4
.IX Item "bundle"
The command to use to bundle a set of files into a single archive file
.Ip "\fBsink\fR" 4
.IX Item "sink"
The affix to a command to discard its output
.Ip "\fBfind\fR" 4
.IX Item "find"
The command to find a file within the TeX \fItree\fR\|(s).
.PP
Values that are too long for one line can be split across multiple lines
by using \f(CW\*(C`\e\*(C'\fR as the line-continuation symbol.
.PP
There are two environment variables that \fBbundledoc\fR makes available
for use by configuration-file commands: \f(CW\*(C`BDBASE\*(C'\fR, which is set to
\&\fIsomefile\fR (as in the section on "OPTIONS"), and \f(CW\*(C`BDINPUTS\*(C'\fR, which is set to a
space-separated list of files that a command is to operate upon.  That
is, when the command associated with \f(CW\*(C`bundle\*(C'\fR is running, \f(CW\*(C`BDINPUTS\*(C'\fR
contains the list of all the files that are to be archived.  In
contrast, when the command associated with \f(CW\*(C`find\*(C'\fR is running,
\&\f(CW\*(C`BDINPUTS\*(C'\fR contains the name of the file to search for.
.Sh "Examples"
.IX Subsection "Examples"
The following configuration file parallels \fBbundledoc\fR's default
values of the various configuration-file variables, which represents a
kpathsea-based TeX distribution running on a generic Unix system,
which doesn't necessarily have any of the \s-1GNU\s0 tools, such as \fBgzip\fR
or \s-1GNU\s0 \fBtar\fR:
.PP
.Vb 2
\&    # "Default" configuration file
\&    # By Scott Pakin <pakin@uiuc.edu>
.Ve
.Vb 3
\&    bundle: (tar -cvf - $BDINPUTS | compress > $BDBASE.tar.Z)
\&    sink:   > /dev/null 2>&1
\&    find:   kpsewhich -progname=latex $BDINPUTS
.Ve
The parentheses in the \f(CW\*(C`bundle:\*(C'\fR line tell the Unix shell to run the
command in a subshell.	This is to make the \f(CW\*(C`sink:\*(C'\fR affix work
properly (i.e., so there aren't two \f(CW\*(C`>\*(C'\fR's in the same command).
.PP
Notice how the commands treat \f(CW\*(C`BDBASE\*(C'\fR and \f(CW\*(C`BDINPUTS\*(C'\fR like any other
environment variables in a Unix shell, using \f(CW\*(C`$\*(C'\fR to take their value.
Other operating systems use different conventions for referring to
environment variables.	For instance, a configuration file for a
Windows-based TeX distribution would use \f(CW\*(C`%BDBASE%\*(C'\fR and \f(CW\*(C`%BDINPUTS%\*(C'\fR
instead.
.PP
The value for \f(CW\*(C`sink:\*(C'\fR is specific to an operating system.  The value
for \f(CW\*(C`find:\*(C'\fR is specific to a TeX distribution.	 \f(CW\*(C`bundle:\*(C'\fR is where
the most opportunity for customization lies.  You can use \f(CW\*(C`bundle:\*(C'\fR
to specify your favorite archive format.  For example, you can produce
a shar file on Unix with something like:
.PP
.Vb 1
\&    bundle: (shar --archive-name="$BDBASE" $BDINPUTS > $BDBASE.sh)
.Ve
or a \s-1CAB\s0 file on Microsoft Windows with something like:
.PP
.Vb 1
\&    bundle: cabarc -r -p N %BDBASE%.cab %BDINPUTS%
.Ve
.SH "FILES"
.IX Header "FILES"
The user must have previously installed \fIsnapshot.sty\fR and used it to
produce a dependency file for his document.  Besides that, the set of
external files needed by \fBbundledoc\fR is system-specific and depends on the
configuration file used.  (See the section on "CONFIGURATION FILES", above.)
.PP
\&\fBbundledoc\fR currently comes with two configuration files:
.Ip "\fItetex.cfg\fR" 4
.IX Item "tetex.cfg"
Configuration file for teTeX systems.  teTeX is a kpathsea-based TeX
distribution that runs under Unix.  \fItetex.cfg\fR assumes you have
\&\fBgzip\fR and uses it to produce a \fI.tar.gz\fR archive file.  The
configuration file has \fBbundledoc\fR use \fBkpsewhich\fR to find LaTeX
files.
.Ip "\fImiktex.cfg\fR" 4
.IX Item "miktex.cfg"
Configuration file for MikTeX systems.	MikTeX is a popular TeX
distribution for Microsoft Windows.  \fImiktex.cfg\fR assumes you have \fBzip\fR
and uses it to produce a \fI.zip\fR archive file.	The configuration file has
\&\fBbundledoc\fR use the rather nonstandard \fBinitexmf\fR to find LaTeX files.
.SH "NOTES"
.IX Header "NOTES"
.Sh "Issues When Running Under Microsoft Windows"
.IX Subsection "Issues When Running Under Microsoft Windows"
First, because \fBbundledoc\fR is a Perl script, you should do one of the
following to run it under Windows:
.Ip "\(bu" 4
\&\f(CW\*(C`perl bundledoc\*(C'\fR
.Ip "\(bu" 4
Rename \fIbundledoc\fR to \fIbundledoc.pl\fR and run \f(CW\*(C`bundledoc.pl\*(C'\fR.	 (This
is assuming you have a file association set up for \fI.pl\fR.)
.Ip "\(bu" 4
Run the \fBpl2bat\fR script (if you have it) to convert \fIbundledoc\fR to
\&\fIbundledoc.bat\fR, then run \f(CW\*(C`bundledoc\*(C'\fR.
.PP
Second, Windows uses a multi-rooted filesystem (i.e., multiple drive
letters).  I wouldn't be surprised if bad things were to happen if the
files to be bundled are scattered across drives.  In addition, Windows
supports ``\s-1UNC\s0'' filenames, which have no drive letter at all, just a
machine and share name.	 \s-1UNC\s0 filenames are also untested waters for
\&\fBbundledoc\fR.  Be careful!
.Sh "Testing Status"
.IX Subsection "Testing Status"
I have tested \fBbundledoc\fR only with Perl v5.6.0 and only on the
following platforms:
.Ip "\(bu" 4
Linux + teTeX
.Ip "\(bu" 4
Windows \s-1NT\s0 + MiKTeX
.Ip "\(bu" 4
Solaris + ??? (something kpathsea-based)
.PP
It is my hope that \fBbundledoc\fR works on many more platforms than
those.	I tried to make the program itself fairly independent of the
operating system; only the configuration files should have to change
to run \fBbundledoc\fR on a different system.
.Sh "Future Work"
.IX Subsection "Future Work"
I'd like \fBbundledoc\fR to work on as wide a variety of TeX
distributions as possible.  If your platform is significantly
different from the ones listed in the section on "Testing Status" (e.g., if you're
running MacOS) and you need to create a substantially different
configuration file from \fItetex.cfg\fR and \fImiktex.cfg\fR, please send it
to me at the address listed in the section on "AUTHOR" so I can include it in a
future version of \fBbundledoc\fR.	 (I make no promises, though).
.PP
Once \fBbundledoc\fR works on all the major operating systems and TeX
distributions, it would be really convenient if I could get
\&\fBbundledoc\fR to detect the platform it's running on and automatically
select an appropriate configuration file.
.PP
Finally, it would be handy for \fBbundledoc\fR to include fonts in the
archive file.  At a minimum, it should include \fI.tfm\fR files, but it
would be even better if it included \fI.mf\fR, \fI.pfb\fR, \fI.ttf\fR, and
other common font formats, as well.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgzip\fR\|(1), \fIkpsewhich\fR\|(1), \fIlatex\fR\|(1), \fIperl\fR\|(1), \fIzip\fR\|(1), the \fBsnapshot\fR
documentation
.SH "AUTHOR"
.IX Header "AUTHOR"
Scott Pakin, \fIpakin@uiuc.edu\fR
